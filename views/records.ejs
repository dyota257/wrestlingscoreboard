<%- include('boilerplate'); %> 
    <title>
        <%- title %>
    </title>

        
        
        

</head>
<body>
    <%- include('header'); %> 
    

    <section class="container">
        <h1 class="title is-3"><%- title %></h1>
    </section>

   
    <div class="container">
        <h2>Wrestlers</h2>
        <%- names %> 
    </div>
    
    <div class="container">
        <h2>Tournaments</h2>
        <%- tournaments %> 
    </div>

    <section class="container">
        <%- table %> 

    </section>
    
    <script>
        
        var filter = {
            name: '',
            tournament: ''
        };

        var tableRows = document.querySelectorAll('tr')
        
        // Dropdown list filtering
        document.querySelectorAll('select#names')[0].addEventListener('change', function() {
            filter['name'] = document.getElementById('names').value
            filterTable();
        })
        
        document.querySelectorAll('select#tournaments')[0].addEventListener('change', function() {
            filter['tournament'] = document.getElementById('tournaments').value
            filterTable();
        })

        function filterTable() {
            // clear all styles
            for(var i=1;i<tableRows.length;i++){document.querySelectorAll('tr')[i].style.display = ''}
            // apply filter
            for(var i=1;i<tableRows.length;i++){
                if (
                    tableRows[i].innerText.indexOf(filter['name']) === -1
                    || tableRows[i].children['tournament'].innerText !== filter['tournament']
                    && filter['tournament'] !== ''
                ) {
                    document.querySelectorAll('tr')[i].style.display = 'none'
                }
            }
        };
    </script>
</body>
</html>